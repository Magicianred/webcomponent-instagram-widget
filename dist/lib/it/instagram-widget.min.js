// WebComponent: InstagramWidget 2.4.0 - Collection of WebComponents by Patryk Rzucidlo [@PTKDev] <support@ptkdev.io>
// https://github.com/ptkdev-components/webcomponent-instagram-widget
(function() { class InstagramWidget extends HTMLElement{constructor(){super();const t=document.createElement("template");t.innerHTML='<style id="instagram-widget-style">#instagram-widget *{margin:0;padding:0;line-height:0}#instagram-widget .instagram-widget-container{text-align:center;justify-content:center;font-weight:500}#instagram-widget .instagram-widget-photos li img{border-radius:5%;background-color:#f8f8ff;object-fit:cover;object-position:50% 50%;max-width:300px;max-height:300px;min-width:80px;min-height:80px;margin:2px}#instagram-widget .instagram-content ul{list-style-type:none;padding-inline-start:0;width:100%}#instagram-widget .instagram-widget-photos li{list-style-type:none;display:inline}</style><div id="instagram-widget" version="2.4.0">\n\t<div class="instagram-widget-container">\n\t\t<div class="instagram-widget-content">\n\t\t\t<ul class="instagram-widget-photos"></ul>\n\t\t</div>\n\t</div>\n</div>',this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(t.content.cloneNode(!0)),this.json=null,this.options_default={username:"@ptkdev","items-limit":"9","image-width":"100%","image-height":"100%",grid:"responsive",cache:"enabled","border-spacing":"2px","border-corners":"5","force-square":"yes"},this.options=Object.create(this.options_default)}build_html(){let t=this.json.graphql.user.edge_owner_to_timeline_media.edges,e=[];for(let i=0;i<t.length;i++)e.push({url:`https://www.instagram.com/p/${t[i].node.shortcode}/`,thumbnail:t[i].node.thumbnail_src,display_url:void 0!==t[i].node.display_url?t[i].node.display_url:"",caption:t[i].node.edge_media_to_caption.edges[0]&&void 0!==t[i].node.edge_media_to_caption.edges[0].node.text?t[i].node.edge_media_to_caption.edges[0].node.text:""});let i="";for(let t=0;t<e.length&&t<this.options["items-limit"];t++)i+=`<li><a href="${e[t].url}" rel="nofollow external noopener noreferrer" target="_blank" title="${e[t].caption.substring(0,100).replace(/"/g,"")}"><img width="${this.options["image-width"]}" height="${this.options["image-height"]}" src="${e[t].display_url}" alt="${e[t].caption.substring(0,100).replace(/"/g,"")}" loading="lazy" /></a></li>`;if(document.querySelector("instagram-widget").shadowRoot.querySelector(".instagram-widget-photos").innerHTML=i,""!==this.options.grid&&null!==this.options.grid&&"responsive"!==this.options.grid){let t=this.options.grid.split("x"),e=100/parseInt(t[0]),i=document.querySelector("instagram-widget").shadowRoot.querySelectorAll(".instagram-widget-photos img");for(let o=0;o<i.length;o++)i[o].removeAttribute("width"),i[o].style.width=`calc(${e}% - (${this.options["border-spacing"]} * (${parseInt(t[0])} * 2)))`,i[o].style.maxWidth="none",i[o].style.maxHeight="none",i[o].style.borderRadius=this.options["border-corners"]+"%",i[o].style.margin=this.options["border-spacing"],"yes"===this.options["force-square"]&&(i[o].removeAttribute("height"),i[o].style.height=document.querySelector("instagram-widget").shadowRoot.querySelector(".instagram-widget-photos img").clientWidth+"px")}else{let t=document.querySelector("instagram-widget").shadowRoot.querySelectorAll(".instagram-widget-photos img");for(let e=0;e<t.length;e++)t[e].style.borderRadius=this.options["border-corners"]+"%",t[e].style.margin=this.options["border-spacing"],"yes"===this.options["force-square"]&&(t[e].removeAttribute("height"),t[e].style.maxHeight="none",t[e].style.height=document.querySelector("instagram-widget").shadowRoot.querySelector(".instagram-widget-photos img").clientWidth+"px")}}api_fetch(){let t=this,e=`https://www.instagram.com/${this.options.username.replace("@","")}/?__a=1`;fetch(e,{cache:null===this.options.cache||"enabled"===this.options.cache?"force-cache":"default"}).then((function(t){if(200===t.status)return t.json()})).then((function(e){t.json=e,t.build_html(),window.onresize=()=>{let e=document.querySelector("instagram-widget").shadowRoot.querySelectorAll(".instagram-widget-photos img");for(let i=0;i<e.length;i++)"yes"===t.options["force-square"]&&(e[i].style.height=document.querySelector("instagram-widget").shadowRoot.querySelector(".instagram-widget-photos img").clientWidth+"px")}}))}static get observedAttributes(){return["username","items-limit","grid","image-width","image-height","border-spacing","border-corners","force-square","cache"]}attributeChangedCallback(t,e,i){if(e!==i)switch(this.options[t]=null===i||""===i?this.options_default[t]:i,t){case"username":this.api_fetch();break;default:null!==this.json&&this.build_html()}}}window.customElements.define("instagram-widget",InstagramWidget); })();